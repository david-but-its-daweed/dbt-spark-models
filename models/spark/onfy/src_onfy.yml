models:
  - name: onfy_search_conversion
    description: owner - andrewocean, aggregated dataset on user search to card open, adding to cart or order conversion
    columns:
      - name: search_event_dt
        description: the date of the users searches
      - name: search_event_date
        description: tech date field for partitioning
      - name: search_event_id
        description: id of a search
      - name: search_query
        description: the query (aka words) from the search bar, manual or chosen from suggest
      - name: is_category_search
        description: the flag of categorized search
      - name: has_product_results
        description: flag of search with actual results listing or empty results
      - name: is_suggest
        description: flag of suggest search (clicked from suggest below the input)
      - name: search_or_catalog_flg
        description: indicator of search or catalog type of event
      - name: platform
        description: device platform
      - name: is_not_robot_flg
        description: flag of the robot device (based on the device_stats.preview.total_num > 0 meaning the device actually seen products)
      - name: marketing_source
        description: marketing source of a device
      - name: product_id
        description: id of a touched (opened, added to cart, ordered) product
      - name: product_name
        description: name of a touched (opened, added to cart, ordered) product
      - name: pzn
        description: pzn of a touched (opened, added to cart, ordered) product
      - name: is_sponsored
        description: flag of sposored product in the search (labeled as sponsored)
      - name: opening_event_id
        description: id of a product opening
      - name: adding_event_id
        description: id of a product adding
      - name: order_id
        description: id of a product order
      - name: order_before_products_price
        description: sum of before discounts product price (price * quantity)
      - name: order_products_price
        description: sum of product price (price * quantity)

  - name: onfy_source_campaign_funnels
    description: owner - andrewocean, aggregated dataset of sources previews, product openings, addings to cart and orders
    columns:
      - name: event_dt
        description: the date of the users searches
      - name: event_date
        description: tech date field for partitioning
      - name: source
        description: type of channel from the latest interaction in the user experience funnel based on the time (search, catalog, recommendation widget, banner, email, popup)
      - name: first_page
        description: source screen or page where preview was loaded
      - name: placement
        description: search query or category name, recommendation_type for recommendations, pzn for email, product_id for popup
      - name: placement_pzn
        description: pzn, where recommendation was placed at, email led to, and popup was open at
      - name: campaign_name
        description: promo_key from product preview event, block_name from banner, utm_campaign from campaign
      - name: product_id
        description: id of a touched (previewed, opened, added, ordered) product
      - name: product_name
        description: name of a touched (previewed, opened, added, ordered) product
      - name: pzn
        description: pzn of a touched (previewed, opened, added, ordered) product
      - name: manufacturer
        description: manufacturer of a touched (previewed, opened, added, ordered) product
      - name: previews
        description: number of product previews of specific product within the mentioned sources
      - name: openings
        description: number of detailed product page openings of specific product within the mentioned sources
      - name: addings
        description: number of product addings to cart of specific product within the mentioned sources
      - name: order_id
        description: id of an order with specific product included (needed for recalculations within different filter set)
      - name: order_products_price
        description: sum of gmv in this order for this product (there are may be 2+ packages with diff quantity of a product for diff price)
      - name: order_quantity
        description: number of packs bought in this order for this product
        
  - name: onfy_product_analogues
    description: owner - andrewocean, the table has a list of not prescribed current products from active pharmacies with their analogues; product analogues calculates based on medicine_ingredient table â€“ the same quantity, unit and dosage form
    columns:
      - name: product_id
        description: main product id
      - name: product_pzn
        description: main product pzn
      - name: product_name
        description: main product name
      - name: product_package_size
        description: main product package size as quantity and units
      - name: product_manufacturer
        description: main product manufacturer as short name
      - name: product_min_price
        description: main product price as minimal price at onfy at the moment
      - name: analogue_id
        description: analogue product id
      - name: analogue_pzn
        description: analogue product pzn
      - name: analogue_name
        description: analogue product name
      - name: analogue_package_size
        description: analogue product package size as quantity and units
      - name: analogue_manufacturer
        description: analogue product manufacturer as short name
      - name: analogue_min_price
        description: analogue product price as minimal price at onfy at the moment

  - name: onfy_products_daily_visits_orders
    description: owner - andrewocean, the table has a list of not prescribed current products with the number of visits and orders by date for the last 730 days
    columns:
      - name: product_id
        description: product id
      - name: pzn
        description: pzn
      - name: product_name
        description: product name
      - name: package_size
        description: product package size as quantity and units
      - name: manufacturer
        description: product manufacturer as short name
      - name: dt
        description: the date of numbers based on order_created_time_cet for orders and event_ts_cet for events
      - name: visits
        description: productOpen events number from device_events mart 
      - name: orders
        description: number of unique order_id from orders_info mart
      - name: ordered_items
        description: sum of quantity of ordered product from orders_info mart
      - name: before_products_price
        description: sum of GMV based on before_products_price of ordered products from orders_info mart
